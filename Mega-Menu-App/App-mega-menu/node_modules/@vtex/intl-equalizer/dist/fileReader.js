"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = fileReader;

var _fs = _interopRequireDefault(require("fs"));

var _path = _interopRequireDefault(require("path"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function walk(dir, languages, callback) {
  var files = _fs["default"].readdirSync(dir);

  files.forEach(function (file) {
    var filepath = _path["default"].join(dir, file);

    var stats = _fs["default"].statSync(filepath);

    if (stats.isDirectory()) {
      walk(filepath, callback);
    } else if (stats.isFile() && (languages.includes(_path["default"].basename(filepath, '.js')) || languages.includes(_path["default"].basename(filepath, '.json')))) {
      callback(filepath, stats);
    }
  });
}

function fileReader(_ref) {
  var languages = _ref.languages,
      localesDirectory = _ref.localesDirectory;
  var termsPerLanguage = languages.reduce(function (acc, lang) {
    acc[lang] = {};
    return acc;
  }, {});
  walk(localesDirectory, languages, function (filepath) {
    var language = _path["default"].basename(filepath, '.js').replace('.json', '');

    var terms = require(filepath);

    termsPerLanguage[language] = terms;
  });
  return termsPerLanguage;
}