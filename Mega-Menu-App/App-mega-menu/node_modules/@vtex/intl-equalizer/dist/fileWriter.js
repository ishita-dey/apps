"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = writeFile;

var _fs = _interopRequireDefault(require("fs"));

var _constants = require("./constants");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function writeFile(_ref) {
  var sortedLanguages = _ref.sortedLanguages,
      failedSortLanguages = _ref.failedSortLanguages,
      locales = _ref.locales,
      localesDirectory = _ref.localesDirectory,
      referenceLocale = _ref.referenceLocale;
  locales.forEach(function (locale) {
    if (locale === referenceLocale || failedSortLanguages.find(function (failedLocale) {
      return failedLocale === locale;
    })) {
      return;
    }

    var content = JSON.stringify(sortedLanguages[locale], null, 2);

    try {
      console.log(_constants.MESSAGES.WRITING_LOCALE(locale));

      _fs["default"].writeFileSync("".concat(localesDirectory, "/").concat(locale, ".json"), content, 'utf8');
    } catch (err) {
      console.error(err);
      console.log(_constants.MESSAGES.COULD_NOT_WRITE_JSON(locale));
      process.exit(1);
    }
  });
}